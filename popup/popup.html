<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title data-i18n="browserActionTitle">Tabs Pin</title>
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <div class="popup-container">
    <!-- Header -->
    <header class="popup-header">
      <div class="logo-section">
        <img src="../assets/icons/icon-32.png" alt="Tabs Pin" class="logo">
        <div class="header-info">
          <h1 class="app-name" data-i18n="extensionName">Tabs Pin</h1>
          <span class="header-subtitle" data-i18n="browserActionTitle">Pin Tabs Manager</span>
        </div>
      </div>
    </header>

    <!-- Main Content -->
    <main class="popup-main">
      <!-- Loading State -->
      <div class="loading-state" id="loadingState">
        <div class="spinner"></div>
        <p data-i18n="loading">Loading...</p>
      </div>

      <!-- Empty State -->
      <div class="empty-state" id="emptyState" style="display: none;">
        <div class="empty-icon">ðŸ“Œ</div>
        <h2 data-i18n="noTabsConfigured">No tabs configured</h2>
        <p data-i18n="configureTabsMessage">Configure your favorite tabs in the options page to get started.</p>
        <div class="empty-actions">
          <button class="primary-btn" id="openOptionsFromEmpty" data-i18n="openOptions">Open Options</button>
          <button class="secondary-btn" id="pinCurrentFromEmpty">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
              <path d="M16,12V4H17V2H7V4H8V12L6,14V16H11.2V22H12.8V16H18V14L16,12Z"/>
            </svg>
            <span data-i18n="pinCurrentTab">Pin Current Tab</span>
          </button>
        </div>
      </div>

      <!-- Quick Actions -->
      <div class="quick-actions" id="quickActions" style="display: none;">
        <div class="primary-action">
          <button class="open-all-btn" id="openAllBtn">
            <div class="btn-content">
              <span class="btn-icon">ðŸš€</span>
              <div class="btn-text-section">
                <span class="btn-text" data-i18n="openAllTabs">Open All Tabs</span>
                <span class="btn-description" data-i18n="clickToOpenPinnedTabs">Click to open your pinned tabs</span>
              </div>
              <span class="btn-count" id="tabCount">0</span>
            </div>
            <div class="btn-loading" id="btnLoading" style="display: none;">
              <div class="loading-spinner"></div>
              <span>Opening...</span>
            </div>
          </button>
        </div>
        
        <div class="secondary-actions">
          <button class="action-btn pin-action" id="pinCurrentMainBtn">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
              <path d="M16,12V4H17V2H7V4H8V12L6,14V16H11.2V22H12.8V16H18V14L16,12Z"/>
            </svg>
            <span data-i18n="pinCurrentTab">Pin Current Tab</span>
            <div class="action-status" id="pinActionStatus"></div>
          </button>
          
          <button class="action-btn options-action" id="openOptionsMainBtn">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
              <path d="M12 15.5A3.5 3.5 0 0 1 8.5 12A3.5 3.5 0 0 1 12 8.5a3.5 3.5 0 0 1 3.5 3.5a3.5 3.5 0 0 1-3.5 3.5m7.43-2.53c.04-.32.07-.64.07-.97c0-.33-.03-.66-.07-1l2.11-1.63c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.31-.61-.22l-2.49 1c-.52-.39-1.06-.73-1.69-.98l-.37-2.65A.506.506 0 0 0 14 2h-4c-.25 0-.46.18-.5.42l-.37 2.65c-.63.25-1.17.59-1.69.98l-2.49-1c-.22-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64L4.57 11c-.04.34-.07.67-.07 1c0 .33.03.65.07.97L2.46 14.6c-.19.15-.24.42-.12.64l2 3.46c.12.22.39.31.61.22l2.49-1c.52.39 1.06.73 1.69.98l.37 2.65c.04.24.25.42.5.42h4c.25 0 .46-.18.5-.42l.37-2.65c.63-.25 1.17-.59 1.69-.98l2.49 1c.22.09.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.63Z"/>
            </svg>
            <span data-i18n="openOptions">Manage Tabs</span>
          </button>
        </div>
        
        <div class="status-section">
          <div class="status-info" id="statusInfo">
            <span class="status-text" id="statusText"></span>
          </div>
        </div>
      </div>

      <!-- Categories List -->
      <div class="categories-section" id="categoriesSection" style="display: none;">
        <div class="section-header">
          <h3 class="section-title" data-i18n="categories">Categories</h3>
          <button class="section-action" id="manageCategoriesBtn" data-i18n-title="manageCategoriesButtonTooltip" title="Manage categories">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
              <path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/>
            </svg>
          </button>
        </div>
        <div class="categories-list" id="categoriesList">
          <!-- Categories will be populated dynamically -->
        </div>
      </div>

      <!-- Recent Activity -->
      <div class="activity-section" id="activitySection" style="display: none;">
        <div class="activity-stats">
          <button class="stat clickable" id="pinnedTabsStatBtn" data-i18n-title="viewAllPinnedTabsTooltip" title="Voir tous les onglets Ã©pinglÃ©s">
            <span class="stat-number" id="pinnedTabsCount">0</span>
            <span class="stat-label" data-i18n="pinnedTabsShort">Ã‰pinglÃ©s</span>
            <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor">
              <path d="M8.59 16.59L13.17 12L8.59 7.41L10 6l6 6-6 6l-1.41-1.41z"/>
            </svg>
          </button>
          <button class="stat clickable" id="categoriesStatBtn" data-i18n-title="manageCategoriesStatTooltip" title="GÃ©rer les catÃ©gories">
            <span class="stat-number" id="categoriesCount">0</span>
            <span class="stat-label" data-i18n="categoriesShort">CatÃ©gories</span>
            <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor">
              <path d="M8.59 16.59L13.17 12L8.59 7.41L10 6l6 6-6 6l-1.41-1.41z"/>
            </svg>
          </button>
        </div>
      </div>
    </main>

    <!-- Footer -->
    <footer class="popup-footer">
      <button class="footer-btn" id="refreshBtn" data-i18n-title="refreshTooltip" title="Refresh tabs and categories data">
        <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
          <path d="M17.65 6.35A7.958 7.958 0 0 0 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08A5.99 5.99 0 0 1 12 18c-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35Z"/>
        </svg>
        <span class="refresh-text" data-i18n="refresh">Refresh</span>
      </button>
      <span class="version-info" id="versionInfo" data-i18n-title="extensionVersionTooltip" title="Extension version"></span>
    </footer>
  </div>

  <!-- Notification Toast -->
  <div class="toast" id="toast">
    <div class="toast-content">
      <span class="toast-icon" id="toastIcon"></span>
      <span class="toast-message" id="toastMessage"></span>
    </div>
  </div>

  <!-- Category Selection Modal -->
  <div class="modal-overlay" id="categorySelectionOverlay" style="display: none;">
    <div class="modal" id="categorySelectionModal">
      <div class="modal-header">
        <h3 class="modal-title" data-i18n="selectCategory">SÃ©lectionner une catÃ©gorie</h3>
        <button class="modal-close" id="closeCategorySelection" aria-label="Close">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
            <path d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"/>
          </svg>
        </button>
      </div>
      
      <div class="modal-content">
        <div class="category-selection-info">
          <img class="tab-preview-favicon" id="previewFavicon" src="" alt="Favicon">
          <div class="tab-preview-info">
            <h4 class="tab-preview-title" id="previewTitle"></h4>
            <p class="tab-preview-url" id="previewUrl"></p>
          </div>
        </div>
        
        <div class="categories-list" id="categorySelectionList">
          <!-- Categories will be populated dynamically -->
        </div>
        
        <div class="modal-actions">
          <button type="button" class="secondary-btn" id="cancelCategorySelection" data-i18n="cancel">Annuler</button>
        </div>
      </div>
    </div>
  </div>

  <script src="popup.js"></script>
</body>
</html>
